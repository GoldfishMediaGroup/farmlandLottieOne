const config={wrapperSelector:".wrapper",animationPath:"https://storage.yandexcloud.net/external-assets/tantum/animations/lottie/jump.json",animationSize:{desktop:{width:456,height:344},mobile:{width:292,height:208}},snowTrails:{enabled:!0,lottiePath:"https://storage.yandexcloud.net/external-assets/tantum/animations/lottie/snow.json",size:{desktop:{width:456,height:344},mobile:{width:292,height:208}},opacity:1,zIndex:"1001",showOnMovement:!0,fadeInDuration:500,fadeOutDuration:1e3,trailDelay:300,reflectWithMain:!0},movement:{enabled:!0,speeds:{desktop:{horizontal:230,vertical:50},mobile:{horizontal:100,vertical:50}},moveInViewport:!0,startDelay:1e3,startPosition:{x:"left",y:"top"},bounceAtEdges:!0,edgeMargin:0,edgeOverflow:65,flipAnimation:!0,flipDuration:300,pauseOnHover:!0,oneTime:!1,restartOnBottom:!0,restartDelay:1e4,bottomThreshold:10},delays:{containerAppearance:500,animationStart:500,movementStart:2300},animationStyles:{pointerEvents:"none",zIndex:"1001",transformOrigin:"center center",willChange:"transform"}};function getDeviceType(){const t=window.matchMedia("(max-width: 768px)").matches,e=window.matchMedia("(min-width: 769px) and (max-width: 1024px)").matches;return t?"mobile":e?"tablet":"desktop"}function getAnimationSize(){const t=getDeviceType();return config.animationSize[t]||config.animationSize.desktop}function getSnowTrailsSize(){const t=getDeviceType();return config.snowTrails.size[t]||config.snowTrails.size.desktop}function getMovementSpeeds(){const t=getDeviceType(),e=config.movement.speeds[t]||config.movement.speeds.desktop;return{horizontalSpeed:e.horizontal,verticalSpeed:e.vertical}}document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector(config.wrapperSelector);if(!t)return;"static"===window.getComputedStyle(t).position&&(t.style.position="relative");const e=getAnimationSize(),n=getSnowTrailsSize(),i=getMovementSpeeds(),o=function(t){const e=document.createElement("div");return e.className="lottie-mascot-main",Object.assign(e.style,{position:"fixed",width:`${t.width}px`,height:`${t.height}px`,opacity:"0",transition:"opacity 0.5s ease-in",pointerEvents:"none",...config.animationStyles}),e}(e),a=function(t){if(!config.snowTrails.enabled)return null;const e=document.createElement("div");return e.className="snow-trails-container",Object.assign(e.style,{position:"fixed",width:`${t.width}px`,height:`${t.height}px`,opacity:"0",pointerEvents:"none",zIndex:config.snowTrails.zIndex,transformOrigin:"center center",transition:`opacity ${config.snowTrails.fadeInDuration}ms ease-in`,display:"block"}),e}(n);function s(t){t&&(t.style.position="fixed",t.style.left="0px",t.style.top="70px")}function r(t,e,n=!1){if(!t)return null;if("undefined"==typeof lottie){const i=document.createElement("script");return i.src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js",i.onload=()=>l(t,e,n),document.head.appendChild(i),null}return l(t,e,n)}function l(t,e,n=!1){const i=lottie.loadAnimation({container:t,renderer:"svg",loop:n,autoplay:!0,path:e});return i.addEventListener("DOMLoaded",(()=>{n||(t.style.opacity="1")})),i}setTimeout((()=>{t.appendChild(a),t.appendChild(o),config.movement.moveInViewport&&(s(o),s(a)),setTimeout((()=>{const t=r(o,config.animationPath),n=r(a,config.snowTrails.lottiePath,!0);if(config.movement.enabled){const s=config.delays?.movementStart||config.movement.startDelay;setTimeout((()=>{!function(t,e,n,i,o,a,s){let r=null,l=null,c=!1,m=!1,d=null,p="right",u="down",f=0,h=!1,g=!1,w=null,y=null,v=null,x=null,S=null,T=!0,$=!1,z=!1,D=!1,b=0,O=0,M=1,A=0;const E=300;let I=s.horizontalSpeed,j=s.verticalSpeed,k=window.innerWidth;function L(){const t=window.innerHeight,e=o.height;return O+e>=t-(config.movement.bottomThreshold||10)}function P(){y={x:b,y:O},v=p,x=M,S=config.delays?.movementStart||config.movement.startDelay}function C(){g||h||(g=!0,T=!1,r&&cancelAnimationFrame(r),e&&$&&W(),t.style.transition="opacity 1s ease-out",t.style.opacity="0",n&&n.pause(),i&&i.pause())}function F(){e&&!z&&config.snowTrails.showOnMovement&&(z=!0,e.style.transform=`translate(${b}px, ${O}px) scaleX(${M})`,setTimeout((()=>{!e||h||g||(e.style.transition=`opacity ${config.snowTrails.fadeInDuration}ms ease-in`,e.style.opacity=config.snowTrails.opacity,$=!0)}),config.snowTrails.trailDelay))}function W(){e&&$&&($=!1,e.style.transition=`opacity ${config.snowTrails.fadeOutDuration}ms ease-out`,e.style.opacity="0",setTimeout((()=>{!e||h||$||g||(z=!1)}),config.snowTrails.fadeOutDuration+100))}function X(){const e=window.innerWidth,n=o.width;"left"===config.movement.startPosition.x?(b=0,p="right",M=1):"right"===config.movement.startPosition.x?(b=e-n,p="left",M=-1):b=0,O=0,u="down",t.style.transform=`translate(${b}px, ${O}px) scaleX(${M})`,P()}function q(t,e,n){if(!config.movement.bounceAtEdges)return!1;const i=config.movement.edgeOverflow;return"left"===p&&t<=-i||"right"===p&&t>=e-n+i}function H(t,e,n){return!!config.movement.bounceAtEdges&&("down"===u&&t>=e-n?!config.movement.restartOnBottom:"up"===u&&t<=0)}function B(e){if(!d)return!1;f=Math.min((e-d)/config.movement.flipDuration,1);const n="right"===p?1:-1,i=f<.5?2*f*f:1-Math.pow(-2*f+2,2)/2;return M+=(n-M)*i,t.style.transform=`translate(${b}px, ${O}px) scaleX(${M})`,!(f>=1)||(m=!1,d=null,M=n,!1)}function N(n){if(!l)return void(l=n);const i=(n-l)/1e3;if(l=n,b+=("right"===p?I:-I)*i,O+=("down"===u?j:-j)*i,D||(D=!0,F()),config.movement.restartOnBottom&&L()&&!g)return void C();const a=window.innerWidth,s=window.innerHeight,r=o.width,c=o.height,f=config.movement.edgeOverflow;q(b,a,r)&&!m&&n-A>E&&(m=!0,d=n,A=n,p="right"===p?"left":"right"),H(O,s,c)&&(u="down"===u?"up":"down"),b=Math.max(-f,Math.min(b,a-r+f)),O=Math.max(0,Math.min(O,s-c)),t.style.transform=`translate(${b}px, ${O}px) scaleX(${M})`,e&&$&&(e.style.transform=`translate(${b}px, ${O}px) scaleX(${M})`)}function V(t){c||h||g||(m&&B(t),N(t)),h||g||(r=requestAnimationFrame(V))}X(),T&&(r=requestAnimationFrame(V));config.movement.pauseOnHover&&(t.addEventListener("mouseenter",(()=>{c=!0,W()})),t.addEventListener("mouseleave",(()=>{c=!1,F()})));window.addEventListener("resize",(()=>{if(h)return;const n=window.innerWidth;if(n===k)return;k=n,w&&clearTimeout(w);const i=getAnimationSize(),o=getMovementSpeeds();t.style.width=`${i.width}px`,t.style.height=`${i.height}px`,e&&(e.style.width=`${i.width}px`,e.style.height=`${i.height}px`),I=o.horizontalSpeed,j=o.verticalSpeed,g=!1,r&&cancelAnimationFrame(r),l=null,r=requestAnimationFrame(V)}))}(o,a,t,n,e,0,i)}),s)}}),config.delays.animationStart)}),config.delays.containerAppearance)}));